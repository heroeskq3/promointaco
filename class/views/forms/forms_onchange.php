<?php
//$_POST['get_option'] = "22";
//$_POST['get_array'] = 'a%3A15%3A%7Bi%3A0%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2214%22%3Bs%3A5%3A%22label%22%3Bs%3A10%3A%22Arquitecto%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2212%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A1%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2214%22%3Bs%3A5%3A%22label%22%3Bs%3A11%3A%22Constructor%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2213%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A2%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2214%22%3Bs%3A5%3A%22label%22%3Bs%3A13%3A%22Especificador%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2214%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A3%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2214%22%3Bs%3A5%3A%22label%22%3Bs%3A10%3A%22Ingreniero%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2215%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A4%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2214%22%3Bs%3A5%3A%22label%22%3Bs%3A10%3A%22Instalador%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2216%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A5%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2214%22%3Bs%3A5%3A%22label%22%3Bs%3A16%3A%22Maestro+de+obras%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2217%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A6%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A1%3A%220%22%3Bs%3A5%3A%22label%22%3Bs%3A4%3A%22Otro%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2218%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A7%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A8%3A%22Analista%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2223%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A8%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A9%3A%22Bodeguero%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2225%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A9%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A6%3A%22Due%C3%B1o%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2226%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A10%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A30%3A%22Gerente+General+%2FAdministrador%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2227%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A11%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A22%3A%22Gerente%2FJefe+de+ventas%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2228%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A12%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A18%3A%22Jefe+de+categor%C3%ADa%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2229%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A13%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A19%3A%22Proveedor%2FComprador%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2230%22%3Bs%3A8%3A%22selected%22%3BN%3B%7Di%3A14%3Ba%3A4%3A%7Bs%3A6%3A%22patern%22%3Bs%3A2%3A%2213%22%3Bs%3A5%3A%22label%22%3Bs%3A8%3A%22Vendedor%22%3Bs%3A5%3A%22value%22%3Bs%3A2%3A%2231%22%3Bs%3A8%3A%22selected%22%3BN%3B%7D%7D';

if (isset($_POST['get_option'])) {

    $results = null;

    function array_recibe($url_array)
    {
        $tmp = stripslashes($url_array);
        $tmp = urldecode($tmp);
        $tmp = unserialize($tmp);

        return $tmp;
    }

    $array       = $_POST['get_array'];
    $array       = array_recibe($array);

    $array = class_arrayFilter($array, 'patern', $_POST['get_option'], '=');

    if ($array['rows']) {
        $results .= '<option value="">Select</option>';

        foreach ($array['response'] as $key_array => $row_array) {
            $results .= '<option value="' . $row_array['value'] . '" ';
            $results .= '>' . $row_array['label'] . '</option>';
        }
        echo $results;
    } else {
        echo '<option value="">No Results</option>';
    }
}